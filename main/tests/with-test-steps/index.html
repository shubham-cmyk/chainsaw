<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="End to end testing tool"><link href=https://github.io/kyverno/chainsaw/main/tests/with-test-steps/ rel=canonical><link href=../with-manifests/ rel=prev><link href=../with-test/ rel=next><link rel=icon href=../../static/favicon.ico><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.4.14"><title>TestSteps based syntax - Chainsaw</title><link rel=stylesheet href=../../assets/stylesheets/main.fad675c6.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.356b1318.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../static/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><meta property=og:type content=website><meta property=og:title content="Chainsaw - TestSteps based syntax"><meta property=og:description content="End to end testing tool"><meta content=https://github.io/kyverno/chainsaw/main/tests/with-test-steps/ property=og:url><meta property=og:image content=https://github.io/kyverno/chainsaw/main/static/card.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta name=twitter:card content=summary_large_image><meta name=twitter:site content=@goreleaser><meta name=twitter:creator content=@goreleaser><meta name=twitter:title content="Chainsaw - TestSteps based syntax"><meta name=twitter:description content="End to end testing tool"><meta name=twitter:image content=https://github.io/kyverno/chainsaw/main/static/card.png></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#teststeps-based-syntax class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> You're not viewing the latest version. <a href=../../..> <strong>Click here to go to latest.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=Chainsaw class="md-header__button md-logo" aria-label=Chainsaw data-md-component=logo> <img src=../../static/kyverno-chainsaw-logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Chainsaw </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> TestSteps based syntax </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=light-blue data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/kyverno/chainsaw title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> kyverno/chainsaw </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../intro/ class=md-tabs__link> Getting Started </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> Writing tests </a> </li> <li class=md-tabs__item> <a href=../../more/events/ class=md-tabs__link> More resources </a> </li> <li class=md-tabs__item> <a href=../../blog/ class=md-tabs__link> Blog </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=Chainsaw class="md-nav__button md-logo" aria-label=Chainsaw data-md-component=logo> <img src=../../static/kyverno-chainsaw-logo.png alt=logo> </a> Chainsaw </label> <div class=md-nav__source> <a href=https://github.com/kyverno/chainsaw title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> kyverno/chainsaw </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../intro/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../install/ class=md-nav__link> <span class=md-ellipsis> Install </span> </a> </li> <li class=md-nav__item> <a href=../../gh-action/ class=md-nav__link> <span class=md-ellipsis> GitHub action </span> </a> </li> <li class=md-nav__item> <a href=../../quick-start/ class=md-nav__link> <span class=md-ellipsis> Quick start </span> </a> </li> <li class=md-nav__item> <a href=../../docs/ class=md-nav__link> <span class=md-ellipsis> Documentation </span> </a> </li> <li class=md-nav__item> <a href=../../community/ class=md-nav__link> <span class=md-ellipsis> Community </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Writing tests </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Writing tests </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> What is Chainsaw </span> </a> </li> <li class=md-nav__item> <a href=../../configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3 checked> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class=md-ellipsis> Tests </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Tests </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../what-is-a-test/ class=md-nav__link> <span class=md-ellipsis> What is a test </span> </a> </li> <li class=md-nav__item> <a href=../with-manifests/ class=md-nav__link> <span class=md-ellipsis> Manifests based syntax </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> TestSteps based syntax </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> TestSteps based syntax </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#the-teststep-resource class=md-nav__link> <span class=md-ellipsis> The TestStep resource </span> </a> </li> <li class=md-nav__item> <a href=#teststep-loading-process class=md-nav__link> <span class=md-ellipsis> TestStep loading process </span> </a> </li> <li class=md-nav__item> <a href=#raw-resource-support class=md-nav__link> <span class=md-ellipsis> Raw Resource Support </span> </a> </li> <li class=md-nav__item> <a href=#example class=md-nav__link> <span class=md-ellipsis> Example </span> </a> <nav class=md-nav aria-label=Example> <ul class=md-nav__list> <li class=md-nav__item> <a href=#01-test-stepyaml class=md-nav__link> <span class=md-ellipsis> 01-test-step.yaml </span> </a> </li> <li class=md-nav__item> <a href=#02-assertyaml class=md-nav__link> <span class=md-ellipsis> 02-assert.yaml </span> </a> </li> <li class=md-nav__item> <a href=#02-erroryaml class=md-nav__link> <span class=md-ellipsis> 02-error.yaml </span> </a> </li> <li class=md-nav__item> <a href=#02-assert-execyaml class=md-nav__link> <span class=md-ellipsis> 02-assert-exec.yaml </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#example-raw-resource class=md-nav__link> <span class=md-ellipsis> Example Raw Resource </span> </a> <nav class=md-nav aria-label="Example Raw Resource"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#01-test-stepyaml_1 class=md-nav__link> <span class=md-ellipsis> 01-test-step.yaml </span> </a> </li> <li class=md-nav__item> <a href=#02-assertyaml_1 class=md-nav__link> <span class=md-ellipsis> 02-assert.yaml </span> </a> </li> <li class=md-nav__item> <a href=#02-erroryaml_1 class=md-nav__link> <span class=md-ellipsis> 02-error.yaml </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#url-file-reference-support class=md-nav__link> <span class=md-ellipsis> URL File Reference Support </span> </a> </li> <li class=md-nav__item> <a href=#example-url-file-reference class=md-nav__link> <span class=md-ellipsis> Example URL File Reference </span> </a> <nav class=md-nav aria-label="Example URL File Reference"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#03-url-apply-test-stepyaml class=md-nav__link> <span class=md-ellipsis> 03-url-apply-test-step.yaml </span> </a> </li> <li class=md-nav__item> <a href=#04-url-assert-test-stepyaml class=md-nav__link> <span class=md-ellipsis> 04-url-assert-test-step.yaml </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#conclusion class=md-nav__link> <span class=md-ellipsis> Conclusion </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../with-test/ class=md-nav__link> <span class=md-ellipsis> Tests based syntax </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class=md-ellipsis> Test steps </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Test steps </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../steps/ class=md-nav__link> <span class=md-ellipsis> What is a test step </span> </a> </li> <li class=md-nav__item> <a href=../../steps/try/ class=md-nav__link> <span class=md-ellipsis> Try </span> </a> </li> <li class=md-nav__item> <a href=../../steps/catch/ class=md-nav__link> <span class=md-ellipsis> Catch </span> </a> </li> <li class=md-nav__item> <a href=../../steps/finally/ class=md-nav__link> <span class=md-ellipsis> Finally </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5 id=__nav_3_5_label tabindex=0> <span class=md-ellipsis> Operations </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Operations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operations/ class=md-nav__link> <span class=md-ellipsis> Operations </span> </a> </li> <li class=md-nav__item> <a href=../../operations/check/ class=md-nav__link> <span class=md-ellipsis> Operation checks </span> </a> </li> <li class=md-nav__item> <a href=../../operations/apply/ class=md-nav__link> <span class=md-ellipsis> Apply </span> </a> </li> <li class=md-nav__item> <a href=../../operations/assert/ class=md-nav__link> <span class=md-ellipsis> Assert </span> </a> </li> <li class=md-nav__item> <a href=../../operations/create/ class=md-nav__link> <span class=md-ellipsis> Create </span> </a> </li> <li class=md-nav__item> <a href=../../operations/command/ class=md-nav__link> <span class=md-ellipsis> Command </span> </a> </li> <li class=md-nav__item> <a href=../../operations/delete/ class=md-nav__link> <span class=md-ellipsis> Delete </span> </a> </li> <li class=md-nav__item> <a href=../../operations/error/ class=md-nav__link> <span class=md-ellipsis> Error </span> </a> </li> <li class=md-nav__item> <a href=../../operations/script/ class=md-nav__link> <span class=md-ellipsis> Script </span> </a> </li> <li class=md-nav__item> <a href=../../operations/sleep/ class=md-nav__link> <span class=md-ellipsis> Sleep </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6 id=__nav_3_6_label tabindex=0> <span class=md-ellipsis> Collectors </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> Collectors </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../collectors/ class=md-nav__link> <span class=md-ellipsis> Collectors </span> </a> </li> <li class=md-nav__item> <a href=../../collectors/pod-logs/ class=md-nav__link> <span class=md-ellipsis> Pod logs </span> </a> </li> <li class=md-nav__item> <a href=../../collectors/events/ class=md-nav__link> <span class=md-ellipsis> Events </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_7> <label class=md-nav__link for=__nav_3_7 id=__nav_3_7_label tabindex=0> <span class=md-ellipsis> Command Line Usage </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_7_label aria-expanded=false> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> Command Line Usage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../commands/chainsaw/ class=md-nav__link> <span class=md-ellipsis> Chainsaw </span> </a> </li> <li class=md-nav__item> <a href=../../commands/chainsaw_completion/ class=md-nav__link> <span class=md-ellipsis> Chainsaw completion </span> </a> </li> <li class=md-nav__item> <a href=../../commands/chainsaw_completion_bash/ class=md-nav__link> <span class=md-ellipsis> Chainsaw completion bash </span> </a> </li> <li class=md-nav__item> <a href=../../commands/chainsaw_completion_fish/ class=md-nav__link> <span class=md-ellipsis> Chainsaw completion fish </span> </a> </li> <li class=md-nav__item> <a href=../../commands/chainsaw_completion_powershell/ class=md-nav__link> <span class=md-ellipsis> Chainsaw completion powershell </span> </a> </li> <li class=md-nav__item> <a href=../../commands/chainsaw_completion_zsh/ class=md-nav__link> <span class=md-ellipsis> Chainsaw completion zsh </span> </a> </li> <li class=md-nav__item> <a href=../../commands/chainsaw_docs/ class=md-nav__link> <span class=md-ellipsis> Chainsaw docs </span> </a> </li> <li class=md-nav__item> <a href=../../commands/chainsaw_generate/ class=md-nav__link> <span class=md-ellipsis> Chainsaw generate </span> </a> </li> <li class=md-nav__item> <a href=../../commands/chainsaw_generate_docs/ class=md-nav__link> <span class=md-ellipsis> Chainsaw generate docs </span> </a> </li> <li class=md-nav__item> <a href=../../commands/chainsaw_kuttl/ class=md-nav__link> <span class=md-ellipsis> Chainsaw kuttl </span> </a> </li> <li class=md-nav__item> <a href=../../commands/chainsaw_kuttl_migrate/ class=md-nav__link> <span class=md-ellipsis> Chainsaw kuttl migrate </span> </a> </li> <li class=md-nav__item> <a href=../../commands/chainsaw_kuttl_migrate_config/ class=md-nav__link> <span class=md-ellipsis> Chainsaw kuttl migrate config </span> </a> </li> <li class=md-nav__item> <a href=../../commands/chainsaw_kuttl_migrate_tests/ class=md-nav__link> <span class=md-ellipsis> Chainsaw kuttl migrate tests </span> </a> </li> <li class=md-nav__item> <a href=../../commands/chainsaw_test/ class=md-nav__link> <span class=md-ellipsis> Chainsaw test </span> </a> </li> <li class=md-nav__item> <a href=../../commands/chainsaw_version/ class=md-nav__link> <span class=md-ellipsis> Chainsaw version </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_8> <label class=md-nav__link for=__nav_3_8 id=__nav_3_8_label tabindex=0> <span class=md-ellipsis> JMESPath </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_8_label aria-expanded=false> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> JMESPath </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../jp/functions/ class=md-nav__link> <span class=md-ellipsis> Functions </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_9> <label class=md-nav__link for=__nav_3_9 id=__nav_3_9_label tabindex=0> <span class=md-ellipsis> APIs </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_9_label aria-expanded=false> <label class=md-nav__title for=__nav_3_9> <span class="md-nav__icon md-icon"></span> APIs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../apis/chainsaw.v1alpha1/ class=md-nav__link> <span class=md-ellipsis> v1alpha1 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> More resources </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> More resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../more/events/ class=md-nav__link> <span class=md-ellipsis> Kubernetes events </span> </a> </li> <li class=md-nav__item> <a href=../../more/crds/ class=md-nav__link> <span class=md-ellipsis> Custom resource definitions </span> </a> </li> <li class=md-nav__item> <a href=../../more/ide-completion/ class=md-nav__link> <span class=md-ellipsis> IDE completion </span> </a> </li> <li class=md-nav__item> <a href=../../more/kuttl-migration/ class=md-nav__link> <span class=md-ellipsis> Migration from KUTTL </span> </a> </li> <li class=md-nav__item> <a href=../../more/test-docs/ class=md-nav__link> <span class=md-ellipsis> Generating test docs </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex> <span class=md-ellipsis> Blog </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../blog/ class=md-nav__link> <span class=md-ellipsis> Blog </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class=md-ellipsis> Archive </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Archive </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../blog/archive/2023/ class=md-nav__link> <span class=md-ellipsis> 2023 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3 id=__nav_5_3_label tabindex=0> <span class=md-ellipsis> Categories </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> Categories </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../blog/category/writing-tests/ class=md-nav__link> <span class=md-ellipsis> Writing Tests </span> </a> </li> <li class=md-nav__item> <a href=../../blog/category/announcements/ class=md-nav__link> <span class=md-ellipsis> announcements </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#the-teststep-resource class=md-nav__link> <span class=md-ellipsis> The TestStep resource </span> </a> </li> <li class=md-nav__item> <a href=#teststep-loading-process class=md-nav__link> <span class=md-ellipsis> TestStep loading process </span> </a> </li> <li class=md-nav__item> <a href=#raw-resource-support class=md-nav__link> <span class=md-ellipsis> Raw Resource Support </span> </a> </li> <li class=md-nav__item> <a href=#example class=md-nav__link> <span class=md-ellipsis> Example </span> </a> <nav class=md-nav aria-label=Example> <ul class=md-nav__list> <li class=md-nav__item> <a href=#01-test-stepyaml class=md-nav__link> <span class=md-ellipsis> 01-test-step.yaml </span> </a> </li> <li class=md-nav__item> <a href=#02-assertyaml class=md-nav__link> <span class=md-ellipsis> 02-assert.yaml </span> </a> </li> <li class=md-nav__item> <a href=#02-erroryaml class=md-nav__link> <span class=md-ellipsis> 02-error.yaml </span> </a> </li> <li class=md-nav__item> <a href=#02-assert-execyaml class=md-nav__link> <span class=md-ellipsis> 02-assert-exec.yaml </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#example-raw-resource class=md-nav__link> <span class=md-ellipsis> Example Raw Resource </span> </a> <nav class=md-nav aria-label="Example Raw Resource"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#01-test-stepyaml_1 class=md-nav__link> <span class=md-ellipsis> 01-test-step.yaml </span> </a> </li> <li class=md-nav__item> <a href=#02-assertyaml_1 class=md-nav__link> <span class=md-ellipsis> 02-assert.yaml </span> </a> </li> <li class=md-nav__item> <a href=#02-erroryaml_1 class=md-nav__link> <span class=md-ellipsis> 02-error.yaml </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#url-file-reference-support class=md-nav__link> <span class=md-ellipsis> URL File Reference Support </span> </a> </li> <li class=md-nav__item> <a href=#example-url-file-reference class=md-nav__link> <span class=md-ellipsis> Example URL File Reference </span> </a> <nav class=md-nav aria-label="Example URL File Reference"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#03-url-apply-test-stepyaml class=md-nav__link> <span class=md-ellipsis> 03-url-apply-test-step.yaml </span> </a> </li> <li class=md-nav__item> <a href=#04-url-assert-test-stepyaml class=md-nav__link> <span class=md-ellipsis> 04-url-assert-test-step.yaml </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#conclusion class=md-nav__link> <span class=md-ellipsis> Conclusion </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/kyverno/chainsaw/edit/main/website/docs/tests/with-test-steps.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg> </a> <h1 id=teststeps-based-syntax><code>TestStep</code>s based syntax<a class=headerlink href=#teststeps-based-syntax title="Permanent link">&para;</a></h1> <p>The <code>TestStep</code>s based syntax is more verbose than the manifests based one but offers more flexibility to influence how a test step runs.</p> <p>It allows providing additional configuration per specific step, and makes it easier to reuse files accross multiple tests.</p> <p>This document focuses on understanding how <code>TestStep</code>s work.</p> <p>Keep in mind that a <code>TestStep</code>, like with the manifest based syntax, relies on <a href=../with-manifests/#file-naming-convention>file naming conventions</a>. On the other hand it doesn't suffer the unsupported deletion limitation and can be combined with manifests based syntax when defining a step.</p> <h2 id=the-teststep-resource>The <code>TestStep</code> resource<a class=headerlink href=#the-teststep-resource title="Permanent link">&para;</a></h2> <p>A <code>TestStep</code> resource, like any Kubernetes resource has an <code>apiVersion</code>, <code>kind</code> and <code>metadata</code> section.</p> <p>It also comes with a <code>spec</code> section used to declaratively represent the <a href=../what-is-a-test/#operations>step operations</a> and other configuration elements belonging to the step being defined.</p> <p>The full structure of the <code>TestStep</code> resource is documented <a href=../../apis/chainsaw.v1alpha1/#chainsaw-kyverno-io-v1alpha1-TestStep>here</a>.</p> <h2 id=teststep-loading-process><code>TestStep</code> loading process<a class=headerlink href=#teststep-loading-process title="Permanent link">&para;</a></h2> <p>In addition to the <a href=../with-manifests/#manifests-loading-process>manifests loading process</a>, if the manifest being loading is a <code>TestStep</code> it is directly aggregated in the steps that compose the test (it would not make sense to consider the <code>TestStep</code> a resource to be applied in the target cluster).</p> <p>Manifests that are not a <code>TestStep</code> are processed as usual and participate to the test step being loaded in the same way they do with <a href=../with-manifests/#manifests-loading-process>manifests based syntax</a>.</p> <p>Note that it's only allowed to have a <strong>single <code>TestStep</code> resource for a given test step</strong>.</p> <h2 id=raw-resource-support>Raw Resource Support<a class=headerlink href=#raw-resource-support title="Permanent link">&para;</a></h2> <p>Chainsaw now allows the specification of Kubernetes resources directly within the TestStep definition. This raw resource feature enhances flexibility by allowing inline resource definitions, particularly useful for concise or reusable configurations.</p> <h2 id=example>Example<a class=headerlink href=#example title="Permanent link">&para;</a></h2> <h3 id=01-test-stepyaml>01-test-step.yaml<a class=headerlink href=#01-test-stepyaml title="Permanent link">&para;</a></h3> <p>The manifest below contains a <code>TestStep</code> in a file called <code>01-test-step.yaml</code>. Chainsaw will load the <code>TestStep</code> in step <code>01</code>. The <code>TestStep</code> defines a custom <code>timeout</code> for step <code>01</code> and references a config map manifest from a relative path.</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">chainsaw.kyverno.io/v1alpha1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">TestStep</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">test-step-name</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>skipDelete</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class=w>  </span><span class=c1># these timeouts are applied per operation</span>
<span class=w>  </span><span class=c1># it would not be possible to override the timeouts</span>
<span class=w>  </span><span class=c1># with a manifests based approach</span>
<span class=w>  </span><span class=nt>timeouts</span><span class=p>:</span>
<span class=w>    </span><span class=nt>apply</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">45s</span>
<span class=w>  </span><span class=nt>try</span><span class=p>:</span>
<span class=w>  </span><span class=c1># apply a configmap to the cluster</span>
<span class=w>  </span><span class=c1># the path to the configmap is relative to the folder</span>
<span class=w>  </span><span class=c1># containing the test, hence allow reusing manifests</span>
<span class=w>  </span><span class=c1># across multiple tests</span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>apply</span><span class=p>:</span>
<span class=w>      </span><span class=nt>file</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">../resources/configmap.yaml</span>
</code></pre></div> <h3 id=02-assertyaml>02-assert.yaml<a class=headerlink href=#02-assertyaml title="Permanent link">&para;</a></h3> <p>The manifest below contains an assertion statement in a file called <code>02-assert.yaml</code>. Chainsaw will associate this manifest with an assert operation in step <code>02</code>. Note that this file doesn't contain a <code>TestStep</code> resource.</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">chainsaw-quick-start</span>
<span class=nt>data</span><span class=p>:</span>
<span class=w>  </span><span class=nt>foo</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bar</span>
</code></pre></div> <h3 id=02-erroryaml>02-error.yaml<a class=headerlink href=#02-erroryaml title="Permanent link">&para;</a></h3> <p>The manifest below contains a <code>TestStep</code> in a file called <code>02-error.yaml</code>. Chainsaw will load the <code>TestStep</code> and aggregate it in step <code>02</code>. The <code>TestStep</code> defines a custom <code>timeout</code> for step <code>02</code> and references an error statement manifest from a relative path.</p> <p>This illustrates how a <code>TestStep</code> resource can be combined with raw manifests to compose a test step in Chainsaw.</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">chainsaw.kyverno.io/v1alpha1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">TestStep</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">test-step-name</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=c1># these timeouts are applied per operation</span>
<span class=w>  </span><span class=c1># it would not be possible to override the timeouts</span>
<span class=w>  </span><span class=c1># with a manifests based approach</span>
<span class=w>  </span><span class=nt>timeouts</span><span class=p>:</span>
<span class=w>    </span><span class=nt>error</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">20s</span>
<span class=w>  </span><span class=nt>try</span><span class=p>:</span>
<span class=w>  </span><span class=c1># evaluate an error statement against resources</span>
<span class=w>  </span><span class=c1># present in the cluster</span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>error</span><span class=p>:</span>
<span class=w>      </span><span class=nt>file</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">../resources/configmap-error.yaml</span>
</code></pre></div> <h3 id=02-assert-execyaml>02-assert-exec.yaml<a class=headerlink href=#02-assert-execyaml title="Permanent link">&para;</a></h3> <p>This manifest contains both an assertion and an exec operation, showing how you can mix operations in a single step.</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">chainsaw.kyverno.io/v1alpha1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">TestStep</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">test-step-name-02</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>try</span><span class=p>:</span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>assert</span><span class=p>:</span>
<span class=w>      </span><span class=nt>file</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">../resources/configmap-assert.yaml</span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>command</span><span class=p>:</span>
<span class=w>      </span><span class=nt>entrypoint</span><span class=p>:</span><span class=w> </span><span class=s>&quot;echo&quot;</span>
<span class=w>      </span><span class=nt>args</span><span class=p>:</span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;Hello</span><span class=nv> </span><span class=s>Chainsaw&quot;</span>
</code></pre></div> <h2 id=example-raw-resource>Example Raw Resource<a class=headerlink href=#example-raw-resource title="Permanent link">&para;</a></h2> <h3 id=01-test-stepyaml_1>01-test-step.yaml<a class=headerlink href=#01-test-stepyaml_1 title="Permanent link">&para;</a></h3> <p>This <code>TestStep</code> defines a custom <code>timeout</code> and applies a <code>ConfigMap</code> directly within the step using the <code>raw resource</code> feature.</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">chainsaw.kyverno.io/v1alpha1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">TestStep</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">test-step-name</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>skipDelete</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class=w>  </span><span class=nt>timeouts</span><span class=p>:</span>
<span class=w>    </span><span class=nt>apply</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">45s</span>
<span class=w>  </span><span class=nt>try</span><span class=p>:</span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>apply</span><span class=p>:</span>
<span class=w>      </span><span class=nt>resource</span><span class=p>:</span>
<span class=w>        </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class=w>        </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class=w>        </span><span class=nt>metadata</span><span class=p>:</span>
<span class=w>          </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">chainsaw-quick-start</span>
<span class=w>        </span><span class=nt>data</span><span class=p>:</span>
<span class=w>          </span><span class=nt>foo</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bar</span>
</code></pre></div> <h3 id=02-assertyaml_1>02-assert.yaml<a class=headerlink href=#02-assertyaml_1 title="Permanent link">&para;</a></h3> <p>This manifest contains an assertion statement for a <code>ConfigMap</code> and does not include a <code>TestStep</code> resource.</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">chainsaw-quick-start</span>
<span class=nt>data</span><span class=p>:</span>
<span class=w>  </span><span class=nt>foo</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bar</span>
</code></pre></div> <h3 id=02-erroryaml_1>02-error.yaml<a class=headerlink href=#02-erroryaml_1 title="Permanent link">&para;</a></h3> <p>The manifest below contains a <code>TestStep</code> in a file called <code>02-error.yaml</code>. Chainsaw will load the <code>TestStep</code> and aggregate it in step <code>02</code>.</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">chainsaw.kyverno.io/v1alpha1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">TestStep</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">test-step-name</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>timeouts</span><span class=p>:</span>
<span class=w>    </span><span class=nt>error</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">20s</span>
<span class=w>  </span><span class=nt>try</span><span class=p>:</span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>error</span><span class=p>:</span>
<span class=w>      </span><span class=nt>file</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">../resources/configmap-error.yaml</span>
</code></pre></div> <h2 id=url-file-reference-support>URL File Reference Support<a class=headerlink href=#url-file-reference-support title="Permanent link">&para;</a></h2> <p>Chainsaw supports URL file references in TestStep operations like apply, assert, and others. This feature allows users to specify files hosted on external sources, such as GitHub raw URLs or other accessible web URLs, directly within their test steps. </p> <h2 id=example-url-file-reference>Example URL File Reference<a class=headerlink href=#example-url-file-reference title="Permanent link">&para;</a></h2> <h3 id=03-url-apply-test-stepyaml>03-url-apply-test-step.yaml<a class=headerlink href=#03-url-apply-test-stepyaml title="Permanent link">&para;</a></h3> <p>This TestStep demonstrates the use of a URL file reference in an apply operation. Chainsaw will fetch the file from the provided URL and execute the apply operation using the fetched content.</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">chainsaw.kyverno.io/v1alpha1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">TestStep</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">url-apply-test-step</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>try</span><span class=p>:</span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>apply</span><span class=p>:</span>
<span class=w>      </span><span class=nt>file</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://raw.githubusercontent.com/user/repo/branch/path/to/external-configmap.yaml</span>
</code></pre></div> <h3 id=04-url-assert-test-stepyaml>04-url-assert-test-step.yaml<a class=headerlink href=#04-url-assert-test-stepyaml title="Permanent link">&para;</a></h3> <p>The manifest below contains a TestStep where the assert operation references a file hosted on an external URL. Chainsaw will load the content from the URL for the assertion.</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">chainsaw.kyverno.io/v1alpha1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">TestStep</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">url-assert-test-step</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>try</span><span class=p>:</span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>assert</span><span class=p>:</span>
<span class=w>      </span><span class=nt>file</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://example.com/path/to/assert-configmap.yaml</span>
</code></pre></div> <h2 id=conclusion>Conclusion<a class=headerlink href=#conclusion title="Permanent link">&para;</a></h2> <p>This test will create a config map in the first step. The second step will both assert that the content of the config map contains the <code>foo: bar</code> data, and verify that the configmap does not contain the <code>lorem: ipsum</code> data.</p> <p>The first step is made of a single <code>TestStep</code> resource, while the second step is the combination of a <code>TestStep</code> resource and a raw manifest.</p> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../with-manifests/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Manifests based syntax"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Manifests based syntax </div> </div> </a> <a href=../with-test/ class="md-footer__link md-footer__link--next" aria-label="Next: Tests based syntax"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Tests based syntax </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Made with ❤️ by Kyverno contributors. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.action.edit", "navigation.footer", "navigation.instant", "navigation.tracking", "navigation.tabs"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.cd18aaf1.min.js></script> </body> </html>